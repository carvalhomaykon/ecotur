{% load static %}

<div class="card-geral">
    <div class="card">
        <div class="img-ponto-turistico">
            <img src="{% static ponto.imagem %}" alt="Imagem {{ ponto.nome }}">
        </div>
        <div class="dados">
            <h3>{{ ponto.nome }}</h3>
            <ul>
                {% for chave, valor in ponto.items %}
                    {% if chave != "coords" and chave != "whatsapp" and chave != "id" and chave != "imagem" and chave != "local_retirada" %}
                        <li><strong>{{ chave|capfirst }}:</strong> {{ valor }}</li>
                    {% endif %}
                {% endfor %}
                <p><a href="{% url nome_detalhe id=ponto.id %}">Saiba mais</a></p>
            </ul>
            {% if exibir_botao %}
                {% if request.user.is_authenticated %}
                    <div class="button">
                        {% if card_rota %}
                            <button 
                                class="adicionar-rota"
                                data-ponto-nome="{{ ponto.nome }}" 
                                onclick="adicionarRota('{{ ponto.nome }}', '{{ ponto.coords|safe }}', '{{ user.username }}')">
                                {{ nome_botao }}
                            </button>
                        {% else %}
                            <a href="{{ ponto.whatsapp }}">
                                <button
                                    class="adicionar-rota">
                                    {{ nome_botao }}
                                </button>
                            </a>
                        {% endif %}
                    </div>
                {% else %}
                    <div class="button">
                        <button class="adicionar-rota">
                            <a href="{% url 'login' %}">{{ frase_login }}</a>
                        </button>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>

{% if botao_click %}
    <script src="{% static 'global/js/adicionar_rota.js' %}"></script>
{% endif %}