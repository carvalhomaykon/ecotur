{% load static %}
{% include "global/partials/_header.html" %}

<section>
    <!-- Título e informações principais -->
    <h1>{{ ponto.nome }}</h1>
    <div class="propaganda">
        <img src="{% static ponto.imagem %}" alt="Imagem {{ ponto.nome }}">
    </div>

    <div class="detalhes">
        <ul>
            <li><p>Endereço: {{ ponto.endereco }}</p></li>
            <li><p>Horário: {{ ponto.horario }}</p></li>
            <li><p>Preço: {{ ponto.preco }}</p></li>
        </ul>     
    </div>

    <!-- História e Curiosidades -->
    <div class="historia">
        <h2>História e Curiosidades</h2>
        <p>{{ ponto.historia }}</p>
    </div>

    <!-- Galeria de Imagens -->
    <div class="galeria-imagens">
        <h2>Galeria de Imagens</h2>
        <ul>
            {% for imagem in ponto.imagens %}
                <li>
                    <img src="{{ imagem }}" alt="Imagem {{ forloop.counter }}" />
                </li>
            {% empty %}
                <li><p>Sem imagens disponíveis.</p></li>
            {% endfor %}
        </ul>
    </div>

    <!-- Atividades e Atrações -->
    <div class="atividades">
        <h2>Atividades e Atrações</h2>
        <ul>
            {% for atividade in ponto.atividades %}
                <li>{{ atividade }}</li>
            {% empty %}
                <li><p>Sem atividades listadas.</p></li>
            {% endfor %}
        </ul>
    </div>

    <!-- Endereço e Contatos -->
    <div class="enderecos">
        <h2>Endereço e Contatos</h2>
        Endereço: <a href="https://maps.google.com/?q={{ ponto.endereco|urlencode }}" target="_blank">{{ ponto.endereco }}</a>
        <div class="contatos">
            <div class="link-contato">
                <img src="{% static 'global/img/logo-instagram.png' %}" alt="Icone Instagram">
                <p><a href="https://www.instagram.com/{{ ponto.instagram }}">{{ ponto.instagram }}</a></p>
            </div>
            <div class="link-contato">
                <img src="{% static 'global/img/logo-facebook.png' %}" alt="Icone Facebook">
                <p><a href="{{ ponto.facebook|default:'#' }}">@facebook</a></p> <!-- Adicionar campo no JSON se necessário -->
            </div>
            <div class="link-contato">
                <img src="{% static 'global/img/whatsapp-logo.png' %}" alt="Icone WhatsApp">
                <p><a href="{{ ponto.whatsapp }}">WhatsApp</a></p>
            </div>
        </div>
    </div>

    <!-- Comentários -->
    <div class="comentario">
        <h2>Comentários</h2>
        <div class="button-avaliacao">
            <button><a href="{% url "avaliacao_ponto" id=ponto.id %}"><b>Faça sua Avaliação</b></a></button>
        </div>
        <ul>
            {% for comentario in ponto.comentarios %}
                <li>
                    <p>{{ comentario }}</p>
                </li>
            {% empty %}
                <li><p>Sem comentários disponíveis.</p></li>
            {% endfor %}
        </ul>
    </div>

    <!-- Botão para adicionar à rota -->
    {% if request.user.is_authenticated %}
        <div class="button-rota">
            <button 
                class="adicionar-rota" 
                data-ponto-nome="{{ ponto.nome }}" 
                onclick="adicionarRota('{{ ponto.nome }}', '{{ ponto.coords|safe }}', '{{ user.username }}')">
                Adicionar à Rota
            </button>
        </div>
    {% else %}
        <div class="button-rota">
            <button class="adicionar-rota">
                <a href="{% url 'login' %}"> Faça login para adicionar a rota </a>
            </button>
        </div>
    {% endif %}
</section>

{% include "global/partials/_footer.html" %}

<script src="{% static 'global/js/adicionar_rota.js' %}"></script>